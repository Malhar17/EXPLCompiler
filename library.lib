MOV R0, SP
SUB R0, 1
MOV R1, SP
SUB R1, 5
MOV R2, [R1]
MOV R3, "Heapset"
EQ R2, R3
JNZ R2, 34
MOV R2, [R1]
MOV R3, "Alloc"
EQ R2, R3
JNZ R2, 54
MOV R2, [R1]
MOV R3, "Free"
EQ R2, R3
JNZ R2, 78
JMP 92
MOV R1, 1024
MOV R2, R1
MOV R3, 2047
LT R2, R3
JZ R2, 52
MOV R2, R1
ADD R1, 8
MOV [R2], R1
JMP 36
RET
MOV R1, 1024
MOV R2, [R1]
MOV R3, -1
EQ R2, R3
JZ R2, 68
MOV [R0], -1
RET
MOV R2, [R1]
MOV [R0], R2
MOV R3, [R2]
MOV [R1], R3
RET
MOV R1, SP
SUB R1, 4
MOV R2, R1
MOV R1, [1024]
MOV [1024], R2
MOV [R0], 0
RET
RET